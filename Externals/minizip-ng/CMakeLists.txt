set(MZ_COMPAT OFF)
set(MZ_BUILD_TESTS OFF)
set(MZ_BUILD_UNIT_TESTS OFF)
set(MZ_BUILD_FUZZ_TESTS OFF)
set(MZ_CODE_COVERAGE OFF)
set(MZ_FETCH_LIBS OFF)
set(MZ_BZIP2 OFF)
set(MZ_PKCRYPT OFF)
set(MZ_WZAES OFF)
set(MZ_OPENSSL OFF)
set(MZ_LIBBSD OFF)
set(SKIP_INSTALL_ALL ON)

if(Iconv_TYPE STREQUAL Bundled)
    set(Iconv_FOUND TRUE)
    set(Iconv_INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/../libiconv/include ${CMAKE_CURRENT_BINARY_DIR}/../libiconv/lib)
    set(Iconv_LIBRARIES Iconv::Iconv)
endif()
if(LibLZMA_TYPE STREQUAL Bundled)
    set(LIBLZMA_FOUND TRUE)
    set(LIBLZMA_INCLUDE_DIRS ${CMAKE_CURRENT_SOURCE_DIR}/../liblzma/api)
    set(LIBLZMA_LIBRARIES LibLZMA::LibLZMA)
endif()
if(ZLIB_TYPE STREQUAL Bundled)
    set(ZLIB_FOUND TRUE)
    set(ZLIB_INCLUDE_DIRS ${CMAKE_CURRENT_BINARY_DIR}/../zlib-ng/zlib-ng)
    set(ZLIB_LIBRARIES ZLIB::ZLIB)
endif()
if(ZSTD_TYPE STREQUAL Bundled)
    set(ZSTD_FOUND TRUE)
    set(ZSTD_LIBRARIES zstd::zstd)
endif()

# minizip-ng otherwise uses system libraries when we provide them above
set(CMAKE_DISABLE_FIND_PACKAGE_PkgConfig TRUE)
set(PKGCONFIG_FOUND FALSE)

add_subdirectory(minizip-ng)
dolphin_disable_warnings(minizip-ng)
