#!/bin/bash

cd ${0/gettextize/}/..
SRCDIR=Source
CPP_FILE_LIST=$(find $SRCDIR \( -name '*.cpp' -o -name '*.h' -o -name '*.c' \) -a ! \
	-path '*Debug*')
xgettext -d dolphin-emu -s --keyword=_ --keyword=wxTRANSLATE -p ./Languages -o dolphin-emu.pot $CPP_FILE_LIST \
	--package-name="Dolphin Emu"

POTFILE=./Languages/dolphin-emu.pot
PO_FILES=$(find ./Languages -name '*.po')
for PO in $PO_FILES
do
	msgmerge --quiet --update --backup=none -s $PO $POTFILE
done
